<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Jenny Lab: Genetika Persilangan</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        /* ===== GLOBAL STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2a6c, #2c3e50);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        .container {
            display: flex;
            flex-direction: column;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            gap: 20px;
            position: relative;
            z-index: 10;
        }

        /* ===== HEADER UTAMA ===== */
        .main-header {
            text-align: center;
            padding: 35px 20px;
            background: linear-gradient(120deg, rgba(255, 102, 102, 0.15), rgba(102, 179, 255, 0.15), rgba(102, 255, 102, 0.15));
            border-radius: 20px;
            margin-bottom: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px);
        }

        .main-header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0) 70%);
            transform: rotate(30deg);
        }

        .main-header h1 {
            font-size: 3.2rem;
            margin-bottom: 15px;
            background: linear-gradient(45deg, #ff6666, #66b3ff, #66ff66);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
            position: relative;
            letter-spacing: 1px;
        }

        .dna-decoration {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
            position: relative;
        }

        .dna-strand {
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, #ff6666, #66b3ff, #66ff66);
            border-radius: 2px;
            position: relative;
        }

        .dna-strand::before, .dna-strand::after {
            content: "";
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            top: -4.5px;
        }

        .dna-strand::before {
            left: 0;
            background: #ff6666;
            border: 2px solid white;
        }

        .dna-strand::after {
            right: 0;
            background: #66ff66;
            border: 2px solid white;
        }

        /* ===== MATERI SECTION STYLE ===== */
        .materi-section {
            background: rgba(0, 0, 0, 0.4);
            padding: 25px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            margin-bottom: 20px;
        }

        .materi-section h1 {
            font-size: 2.2rem;
            margin-bottom: 20px;
            text-align: center;
            background: linear-gradient(45deg, #ff6666, #ffdd00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .materi-subsection {
            margin-bottom: 20px;
        }

        .materi-subsection h2 {
            font-size: 1.4rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .materi-subsection h2::before {
            content: "";
            display: inline-block;
            width: 6px;
            height: 18px;
            border-radius: 3px;
        }

        /* Warna untuk Mendel I */
        #mendel1 h2::before {
            background: linear-gradient(to bottom, #ff6666, #ffdd00);
        }

        /* Warna untuk Mendel II */
        #mendel2 h2::before {
            background: linear-gradient(to bottom, #66b3ff, #99ff99);
        }

        .materi-subsection p, .materi-subsection ul {
            line-height: 1.7;
            margin-left: 16px;
        }

        .materi-subsection ul {
            padding-left: 20px;
            margin-top: 8px;
        }

        .materi-subsection li {
            margin-bottom: 8px;
        }

        .highlight {
            background: rgba(255, 102, 102, 0.2);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }

        .highlight-green {
            background: rgba(102, 255, 102, 0.2);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }

        .example-box {
            background: rgba(255, 221, 0, 0.1);
            border-left: 4px solid #ffdd00;
            padding: 12px 16px;
            margin: 12px 0;
            border-radius: 0 8px 8px 0;
        }

        .example-box-green {
            background: rgba(102, 255, 102, 0.1);
            border-left: 4px solid #66ff66;
            padding: 12px 16px;
            margin: 12px 0;
            border-radius: 0 8px 8px 0;
        }

        .ratio-highlight {
            font-size: 1.4rem;
            font-weight: bold;
            text-align: center;
            margin: 15px 0;
            color: #66ff66;
            text-shadow: 0 0 10px rgba(102, 255, 102, 0.5);
        }

        /* ===== SISA GAYA JENNY LAB ===== */
        header {
            text-align: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        h1.jenny-title {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ff6666, #ffdd00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }

        .content {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .controls {
            flex: 1;
            min-width: 300px;
            background: rgba(0, 0, 0, 0.4);
            padding: 25px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .visualization {
            flex: 2;
            min-width: 500px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .section {
            margin-bottom: 25px;
        }

        .section h2 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #ff6666;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section h2::before {
            content: "";
            display: inline-block;
            width: 8px;
            height: 24px;
            background: linear-gradient(to bottom, #ff6666, #ffdd00);
            border-radius: 4px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }

        .locus-input {
            display: flex;
            gap: 10px;
        }

        .locus-input input {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            outline: none;
            transition: background 0.3s;
        }

        .locus-input input:focus {
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 0 2px #ff6666;
        }

        .locus-input input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .btn {
            background: linear-gradient(45deg, #ff6666, #ffdd00);
            color: white;
            border: none;
            padding: 14px 25px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            width: 100%;
            margin-top: 10px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }

        .btn:active {
            transform: translateY(1px);
        }

        #punnett-container {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 12px;
            overflow: auto;
            max-height: 400px;
        }

        #results-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        .result-card {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .result-card h3 {
            margin-bottom: 10px;
            color: #ffdd00;
        }

        #canvas-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            height: 500px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .phenotype-legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }

        .dominant-color {
            background: linear-gradient(45deg, #ff6666, #ff4444);
        }

        .recessive-color {
            background: linear-gradient(45deg, #ffeb3b, #ffdd00);
        }

        .instructions {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .instructions h2 {
            margin-bottom: 15px;
        }

        .instructions ul {
            padding-left: 20px;
            margin-top: 10px;
        }

        .instructions li {
            margin-bottom: 10px;
        }

        /* ===== LATIHAN SOAL SECTION ===== */
        .latihan-section {
            background: rgba(0, 0, 0, 0.4);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            margin-top: 30px;
        }

        .latihan-section h1 {
            font-size: 2.5rem;
            text-align: center;
            background: linear-gradient(45deg, #ff6666, #66b3ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 25px;
        }

        .question-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease;
        }

        .question-container:hover {
            transform: translateY(-3px);
        }

        .question-number {
            font-size: 1.4rem;
            font-weight: bold;
            color: #ffdd00;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 1.2rem;
            line-height: 1.6;
            margin-bottom: 20px;
            padding-left: 10px;
            border-left: 3px solid #ff6666;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        @media (max-width: 768px) {
            .options {
                grid-template-columns: 1fr;
            }
        }

        .option {
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            font-size: 1.05rem;
        }

        .option:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }

        .option.selected {
            background: rgba(255, 102, 102, 0.3);
            border-color: #ff6666;
        }

        .option.correct {
            background: rgba(102, 255, 102, 0.3);
            border-color: #66ff66;
        }

        .option.incorrect {
            background: rgba(255, 102, 102, 0.3);
            border-color: #ff6666;
        }

        .feedback {
            margin-top: 15px;
            padding: 12px;
            border-radius: 10px;
            font-weight: 600;
            display: none;
        }

        .feedback.correct {
            background: rgba(102, 255, 102, 0.2);
            color: #66ff66;
            display: block;
        }

        .feedback.incorrect {
            background: rgba(255, 102, 102, 0.2);
            color: #ff6666;
            display: block;
        }

        .correct-answer {
            margin-top: 8px;
            font-style: italic;
            color: #66ff66;
            display: none;
        }

        .quiz-btn-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .quiz-btn {
            padding: 12px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .check-btn {
            background: linear-gradient(45deg, #66b3ff, #4da6ff);
            color: white;
        }

        .reset-btn {
            background: linear-gradient(45deg, #ff6666, #ff4d4d);
            color: white;
        }

        .result-container {
            text-align: center;
            padding: 30px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            margin-top: 20px;
            display: none;
        }

        .result-score {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 20px 0;
            background: linear-gradient(45deg, #ffdd00, #ff6666);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .result-message {
            font-size: 1.4rem;
            margin-bottom: 25px;
        }

        /* ===== COPYRIGHT ===== */
        .copyright {
            text-align: center;
            padding: 15px;
            margin-top: 20px;
            font-size: 0.95rem;
            opacity: 0.8;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #ffdd00;
        }

        .copyright a {
            color: #ff6666;
            text-decoration: none;
            font-weight: 600;
        }

        .copyright a:hover {
            text-decoration: underline;
        }

        @media (max-width: 900px) {
            .main-header h1 {
                font-size: 2.5rem;
            }
            
            .dna-decoration {
                display: none;
            }
            
            .content {
                flex-direction: column;
            }

            .visualization {
                min-width: 100%;
            }
            
            .options {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 500px) {
            .main-header h1 {
                font-size: 2rem;
            }
            
            .copyright {
                font-size: 0.85rem;
            }
            
            .latihan-section h1 {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1rem;
            }
            
            .option {
                padding: 12px;
                font-size: 0.95rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ===== HEADER UTAMA ===== -->
        <div class="main-header">
            <h1>Genetika Persilangan</h1>
            <div class="dna-decoration">
                <div class="dna-strand"></div>
                <div class="dna-strand"></div>
                <div class="dna-strand"></div>
            </div>
        </div>

        <!-- ===== BAGIAN MATERI MENDEL I ===== -->
        <div class="materi-section" id="mendel1">
            <h1>HUKUM MENDEL I (HUKUM SEGREGASI)</h1>
            
            <div class="materi-subsection">
                <h2>Pengertian</h2>
                <p>
                    Hukum Mendel I menyatakan bahwa <span class="highlight">sepasang alel dari suatu sifat akan memisah (tersegregasi) secara bebas ketika pembentukan gamet</span>, sehingga setiap gamet membawa hanya satu alel.
                </p>
            </div>
            
            <div class="materi-subsection">
                <h2>Penjelasan Mudah</h2>
                <ul>
                    <li>Suatu sifat dikendalikan oleh dua alel (misalnya <span class="highlight">A</span> dan <span class="highlight">a</span>).</li>
                    <li>Ketika pembentukan gamet (sel kelamin), kedua alel itu <span class="highlight">tidak ikut bersama, tetapi berpisah</span>.</li>
                    <li><span class="highlight">Gamet hanya membawa A atau a, bukan keduanya.</span></li>
                </ul>
            </div>
            
            <div class="materi-subsection">
                <h2>Contoh</h2>
                <div class="example-box">
                    <p><strong>Persilangan:</strong> AA × aa</p>
                    <p><strong>F1 →</strong> Aa (semua heterozigot)</p>
                    <p><strong>F1 disilangkan sendiri:</strong> Aa × Aa</p>
                    <p><strong>Gamet →</strong> A dan a</p>
                    <p><strong>Hasil F2 →</strong> 1 AA : 2 Aa : 1 aa</p>
                </div>
            </div>
            
            <div class="materi-subsection">
                <h2>Ciri Khas Hukum Mendel I</h2>
                <ul>
                    <li>Persilangan <span class="highlight">monohibrid</span> (satu sifat)</li>
                    <li>Rasio F2 genotipe <span class="highlight">1 : 2 : 1</span></li>
                    <li>Rasio F2 fenotipe <span class="highlight">3 : 1</span> (jika dominan–resesif sempurna)</li>
                </ul>
            </div>
        </div>

        <!-- ===== BAGIAN MATERI MENDEL II ===== -->
        <div class="materi-section" id="mendel2">
            <h1>HUKUM MENDEL II (HUKUM PERPADUAN BEBAS)</h1>
            
            <div class="materi-subsection">
                <h2>Pengertian</h2>
                <p>
                    Hukum Mendel II menyatakan bahwa <span class="highlight-green">alel-alel dari sifat yang berbeda akan berpasangan secara bebas ketika pembentukan gamet</span>, sehingga kombinasi alel baru dapat muncul secara acak.
                </p>
            </div>
            
            <div class="materi-subsection">
                <h2>Penjelasan Mudah</h2>
                <ul>
                    <li>Jika ada dua sifat yang dipelajari (misalnya <span class="highlight-green">warna dan bentuk biji kacang</span>), masing-masing sifat memiliki alel tersendiri.</li>
                    <li>Saat gamet terbentuk, <span class="highlight-green">alel dari sifat pertama tidak mempengaruhi alel dari sifat kedua</span>.</li>
                    <li>Contoh: <span class="highlight-green">R/r untuk warna</span>, <span class="highlight-green">Y/y untuk bentuk</span>.</li>
                    <li>Gamet dapat terbentuk: <span class="highlight-green">RY, Ry, rY, ry</span>.</li>
                </ul>
            </div>
            
            <div class="materi-subsection">
                <h2>Contoh Persilangan Dihibrid</h2>
                <div class="example-box-green">
                    <p><strong>Persilangan:</strong> RRYY × rryy</p>
                    <p><strong>F1 →</strong> RrYy</p>
                    <p><strong>F1 disilangkan:</strong> RrYy × RrYy</p>
                    <p><strong>Rasio F2 (fenotipe):</strong></p>
                    <div class="ratio-highlight">9 : 3 : 3 : 1</div>
                    <p><strong>Penjelasan rasio:</strong></p>
                    <ul>
                        <li><span class="highlight-green">9</span> = dominan keduanya (misal: biji bulat kuning)</li>
                        <li><span class="highlight-green">3</span> = dominan pada sifat pertama saja (misal: biji bulat hijau)</li>
                        <li><span class="highlight-green">3</span> = dominan pada sifat kedua saja (misal: biji keriput kuning)</li>
                        <li><span class="highlight-green">1</span> = resesif keduanya (misal: biji keriput hijau)</li>
                    </ul>
                </div>
            </div>
            
            <div class="materi-subsection">
                <h2>Ciri Khas Hukum Mendel II</h2>
                <ul>
                    <li>Persilangan <span class="highlight-green">dihibrid</span> (dua sifat)</li>
                    <li><span class="highlight-green">Kombinasi gamet 4 macam</span> (untuk heterozigot sempurna)</li>
                    <li>Rasio F2 fenotipe <span class="highlight-green">9 : 3 : 3 : 1</span></li>
                </ul>
            </div>
        </div>

        <!-- ===== JENNY LAB UTAMA ===== -->
        <header>
            <h1 class="jenny-title">Jenny Lab</h1>
            <p class="subtitle">An interactive 3D simulation to explore Mendelian genetics through virtual breeding experiments</p>
        </header>

        <div class="content">
            <div class="controls">
                <div class="section">
                    <h2>Parent Genotypes</h2>
                    <div class="input-group">
                        <div>
                            <label>Parent 1 Genotype:</label>
                            <div class="locus-input">
                                <input type="text" id="parent1-locus1" placeholder="Locus 1 (e.g., Aa)" value="Aa" />
                                <input type="text" id="parent1-locus2" placeholder="Locus 2 (e.g., Bb)" value="Bb" />
                            </div>
                        </div>
                        <div>
                            <label>Parent 2 Genotype:</label>
                            <div class="locus-input">
                                <input type="text" id="parent2-locus1" placeholder="Locus 1 (e.g., Aa)" value="aa" />
                                <input type="text" id="parent2-locus2" placeholder="Locus 2 (e.g., Bb)" value="bb" />
                            </div>
                        </div>
                    </div>
                    <button id="mate-btn" class="btn">Mate Parents</button>
                </div>

                <div class="section">
                    <h2>Punnett Square</h2>
                    <div id="punnett-container">
                        <p>Enter parent genotypes and click "Mate" to generate Punnett square</p>
                    </div>
                </div>

                <div class="section">
                    <h2>Simulation Results</h2>
                    <div id="results-container">
                        <div class="result-card">
                            <h3>Theoretical Ratio</h3>
                            <p id="theoretical-ratio">-</p>
                        </div>
                        <div class="result-card">
                            <h3>Simulated Ratio</h3>
                            <p id="simulated-ratio">-</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="visualization">
                <div class="section">
                    <h2>Offspring Visualization</h2>
                    <div id="canvas-container"></div>
                    <div class="phenotype-legend">
                        <div class="legend-item">
                            <div class="legend-color dominant-color"></div>
                            <span>Dominant Phenotype</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color recessive-color"></div>
                            <span>Recessive Phenotype</span>
                        </div>
                    </div>
                </div>

                <div class="instructions">
                    <h2>How to Use</h2>
                    <ul>
                        <li>Enter genotypes for both parents (e.g., "Aa" or "aa" for each locus)</li>
                        <li>Click <span class="highlight">"Mate Parents"</span> to generate offspring</li>
                        <li>View the Punnett square showing all possible combinations</li>
                        <li>3D spheres represent offspring – <span class="highlight">red</span> = dominant, <span class="highlight">yellow</span> = recessive</li>
                        <li><strong>Larger spheres</strong> have more dominant alleles (capital letters)</li>
                        <li>Click any sphere to see its genotype and phenotype</li>
                        <li>Compare theoretical vs. simulated phenotypic ratios</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- ===== LATIHAN SOAL SECTION ===== -->
        <div class="latihan-section">
            <h1>Latihan Soal</h1>
            
            <div class="question-container">
                <div class="question-number">Soal 1</div>
                <div class="question-text">
                    Hukum Mendel I disebut juga sebagai…
                </div>
                <div class="options">
                    <div class="option" data-correct="false">A. Hukum dominansi</div>
                    <div class="option" data-correct="true">B. Hukum segregasi</div>
                    <div class="option" data-correct="false">C. Hukum peluang</div>
                    <div class="option" data-correct="false">D. Hukum perpaduan bebas</div>
                </div>
                <div class="feedback"></div>
                <div class="correct-answer">✓ Jawaban benar: B. Hukum segregasi</div>
            </div>

            <div class="question-container">
                <div class="question-number">Soal 2</div>
                <div class="question-text">
                    Menurut Hukum Mendel I, alel dari suatu sifat akan…
                </div>
                <div class="options">
                    <div class="option" data-correct="false">A. Bergabung saat gamet terbentuk</div>
                    <div class="option" data-correct="true">B. Berpisah secara bebas saat gamet terbentuk</div>
                    <div class="option" data-correct="false">C. Tidak berubah saat fertilisasi</div>
                    <div class="option" data-correct="false">D. Berpasangan secara acak dengan alel sifat lain</div>
                </div>
                <div class="feedback"></div>
                <div class="correct-answer">✓ Jawaban benar: B. Berpisah secara bebas saat gamet terbentuk</div>
            </div>

            <div class="question-container">
                <div class="question-number">Soal 3</div>
                <div class="question-text">
                    Persilangan monohibrid Aa × Aa menghasilkan rasio genotipe F2…
                </div>
                <div class="options">
                    <div class="option" data-correct="false">A. 9 : 3 : 3 : 1</div>
                    <div class="option" data-correct="false">B. 3 : 1</div>
                    <div class="option" data-correct="true">C. 1 : 2 : 1</div>
                    <div class="option" data-correct="false">D. 1 : 1 : 0</div>
                </div>
                <div class="feedback"></div>
                <div class="correct-answer">✓ Jawaban benar: C. 1 : 2 : 1</div>
            </div>

            <div class="question-container">
                <div class="question-number">Soal 4</div>
                <div class="question-text">
                    Fenotipe F2 dari persilangan Aa × Aa (dominansi sempurna) adalah…
                </div>
                <div class="options">
                    <div class="option" data-correct="false">A. 9 : 3 : 3 : 1</div>
                    <div class="option" data-correct="false">B. 1 : 2 : 1</div>
                    <div class="option" data-correct="true">C. 3 : 1</div>
                    <div class="option" data-correct="false">D. 1 : 3</div>
                </div>
                <div class="feedback"></div>
                <div class="correct-answer">✓ Jawaban benar: C. 3 : 1</div>
            </div>

            <div class="question-container">
                <div class="question-number">Soal 5</div>
                <div class="question-text">
                    Hukum Mendel II dikenal dengan nama…
                </div>
                <div class="options">
                    <div class="option" data-correct="false">A. Hukum segregasi</div>
                    <div class="option" data-correct="true">B. Hukum perpaduan bebas</div>
                    <div class="option" data-correct="false">C. Hukum genotipe</div>
                    <div class="option" data-correct="false">D. Hukum dominansi</div>
                </div>
                <div class="feedback"></div>
                <div class="correct-answer">✓ Jawaban benar: B. Hukum perpaduan bebas</div>
            </div>

            <div class="question-container">
                <div class="question-number">Soal 6</div>
                <div class="question-text">
                    Pada dihibrid RrYy, kombinasi gamet yang mungkin adalah…
                </div>
                <div class="options">
                    <div class="option" data-correct="false">A. RY, YY, rr, yy</div>
                    <div class="option" data-correct="true">B. RY, Ry, rY, ry</div>
                    <div class="option" data-correct="false">C. R, r, Y, y saja</div>
                    <div class="option" data-correct="false">D. Hanya RY dan ry</div>
                </div>
                <div class="feedback"></div>
                <div class="correct-answer">✓ Jawaban benar: B. RY, Ry, rY, ry</div>
            </div>

            <div class="question-container">
                <div class="question-number">Soal 7</div>
                <div class="question-text">
                    Persilangan dihibrid RrYy × RrYy menghasilkan rasio fenotipe F2…
                </div>
                <div class="options">
                    <div class="option" data-correct="false">A. 3 : 1</div>
                    <div class="option" data-correct="false">B. 1 : 2 : 1</div>
                    <div class="option" data-correct="false">C. 2 : 1</div>
                    <div class="option" data-correct="true">D. 9 : 3 : 3 : 1</div>
                </div>
                <div class="feedback"></div>
                <div class="correct-answer">✓ Jawaban benar: D. 9 : 3 : 3 : 1</div>
            </div>

            <div class="question-container">
                <div class="question-number">Soal 8</div>
                <div class="question-text">
                    Rasio 9 : 3 : 3 : 1 menunjukkan bahwa…
                </div>
                <div class="options">
                    <div class="option" data-correct="false">A. Hanya satu sifat yang diamati</div>
                    <div class="option" data-correct="true">B. Dua sifat diturunkan secara bebas</div>
                    <div class="option" data-correct="false">C. Alel tidak mengalami segregasi</div>
                    <div class="option" data-correct="false">D. Sifat bersifat komplementer</div>
                </div>
                <div class="feedback"></div>
                <div class="correct-answer">✓ Jawaban benar: B. Dua sifat diturunkan secara bebas</div>
            </div>

            <div class="question-container">
                <div class="question-number">Soal 9</div>
                <div class="question-text">
                    Pada dihibrid, fenotipe kategori "3" pertama (dari rasio 9:3:3:1) adalah…
                </div>
                <div class="options">
                    <div class="option" data-correct="false">A. Dominan warna dan dominan bentuk</div>
                    <div class="option" data-correct="false">B. Resesif warna dan resesif bentuk</div>
                    <div class="option" data-correct="true">C. Dominan warna, resesif bentuk</div>
                    <div class="option" data-correct="false">D. Resesif warna, dominan bentuk</div>
                </div>
                <div class="feedback"></div>
                <div class="correct-answer">✓ Jawaban benar: C. Dominan warna, resesif bentuk</div>
            </div>

            <div class="question-container">
                <div class="question-number">Soal 10</div>
                <div class="question-text">
                    Pernyataan yang benar tentang Hukum Mendel II adalah…
                </div>
                <div class="options">
                    <div class="option" data-correct="false">A. Alel satu sifat memengaruhi pemisahan alel sifat lain</div>
                    <div class="option" data-correct="true">B. Alel satu sifat tidak memengaruhi alel sifat lain saat gamet terbentuk</div>
                    <div class="option" data-correct="false">C. Rasio F2 selalu 3 : 1</div>
                    <div class="option" data-correct="false">D. Hanya terjadi pada persilangan monohibrid</div>
                </div>
                <div class="feedback"></div>
                <div class="correct-answer">✓ Jawaban benar: B. Alel satu sifat tidak memengaruhi alel sifat lain saat gamet terbentuk</div>
            </div>

            <div class="quiz-btn-container">
                <button class="quiz-btn check-btn" id="check-answers">Periksa Jawaban</button>
                <button class="quiz-btn reset-btn" id="reset-answers">Coba Lagi</button>
            </div>

            <div class="result-container" id="result-container">
                <div class="result-score" id="score">Skor Anda: 0 dari 10</div>
                <div class="result-message" id="result-message">Nilai kamu bagus! Pertahankan belajar.</div>
                <button class="quiz-btn reset-btn" id="restart-quiz">Kerjakan Ulang</button>
            </div>
        </div>

        <!-- ===== COPYRIGHT ===== -->
        <div class="copyright">
            &copy; 2025 Jenny Lab. All rights reserved. | 
            <a href="#" onclick="alert('Jenny Lab v1.0\nCreated for educational purposes\nContact: jenny.lab@example.com')">About</a>
        </div>
    </div>

    <script>
        // ======================
        // GLOBAL VARIABLES
        // ======================
        let scene, camera, renderer;
        let offspringObjects = [];
        let raycaster = new THREE.Raycaster();
        let mouse = new THREE.Vector2();

        // ======================
        // MAIN INITIALIZATION
        // ======================
        function init() {
            initThreeJS();
            setupEventListeners();
            setupQuiz();
            render();
        }

        // Initialize Three.js scene
        function initThreeJS() {
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x0c1427);
            scene.fog = new THREE.Fog(0x0c1427, 10, 30);

            camera = new THREE.PerspectiveCamera(
                75,
                document.getElementById('canvas-container').offsetWidth /
                    document.getElementById('canvas-container').offsetHeight,
                0.1,
                1000
            );
            camera.position.z = 15;
            camera.position.y = 5;

            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(
                document.getElementById('canvas-container').offsetWidth,
                document.getElementById('canvas-container').offsetHeight
            );
            renderer.setPixelRatio(window.devicePixelRatio);
            document.getElementById('canvas-container').appendChild(renderer.domElement);

            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);

            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(10, 20, 15);
            directionalLight.castShadow = true;
            scene.add(directionalLight);

            const gridHelper = new THREE.GridHelper(20, 20, 0x444444, 0x222222);
            gridHelper.position.y = -3;
            scene.add(gridHelper);

            window.addEventListener('resize', onWindowResize);
        }

        function onWindowResize() {
            camera.aspect =
                document.getElementById('canvas-container').offsetWidth /
                document.getElementById('canvas-container').offsetHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(
                document.getElementById('canvas-container').offsetWidth,
                document.getElementById('canvas-container').offsetHeight
            );
        }

        // ======================
        // CORE GENETICS FUNCTIONS
        // ======================

        function randomGamet(genotype) {
            const gamete = [];
            for (let i = 0; i < genotype.length; i++) {
                if (genotype[i][0] === genotype[i][1]) {
                    gamete.push(genotype[i][0]);
                } else {
                    const randomIndex = Math.floor(Math.random() * 2);
                    gamete.push(genotype[i][randomIndex]);
                }
            }
            return gamete;
        }

        function buildPunnett(parent1, parent2) {
            const parent1Gametes = getPossibleGametes(parent1);
            const parent2Gametes = getPossibleGametes(parent2);

            const punnettGrid = [];
            const offspringGenotypes = [];

            for (let i = 0; i < parent1Gametes.length; i++) {
                const row = [];
                for (let j = 0; j < parent2Gametes.length; j++) {
                    const offspringGenotype = [];
                    for (let k = 0; k < parent1Gametes[i].length; k++) {
                        const alleles = [parent1Gametes[i][k], parent2Gametes[j][k]].sort();
                        offspringGenotype.push(alleles.join(''));
                    }
                    row.push(offspringGenotype);
                    offspringGenotypes.push(offspringGenotype);
                }
                punnettGrid.push(row);
            }

            const phenotypeCounts = {};
            offspringGenotypes.forEach((genotype) => {
                const phenotype = genotypeToPhenotype(genotype);
                phenotypeCounts[phenotype] = (phenotypeCounts[phenotype] || 0) + 1;
            });

            const totalOffspring = offspringGenotypes.length;
            const theoreticalRatio = {};
            for (const phenotype in phenotypeCounts) {
                theoreticalRatio[phenotype] = (phenotypeCounts[phenotype] / totalOffspring).toFixed(2);
            }

            return {
                grid: punnettGrid,
                theoreticalRatio: theoreticalRatio,
                parent1Gametes: parent1Gametes,
                parent2Gametes: parent2Gametes,
            };
        }

        function genotypeToPhenotype(genotype) {
            for (let locus of genotype) {
                if (locus === locus.toLowerCase()) {
                    return 'recessive';
                }
            }
            return 'dominant';
        }

        function getPossibleGametes(genotype) {
            const locusOptions = genotype.map((locus) => {
                if (locus[0] === locus[1]) {
                    return [locus[0]];
                } else {
                    return [locus[0], locus[1]];
                }
            });
            return cartesianProduct(locusOptions);
        }

        function cartesianProduct(arrays) {
            return arrays.reduce((acc, curr) => {
                return acc.flatMap((d) => curr.map((e) => [...d, e]));
            }, [[]]);
        }

        function spawnOffspring(offspringData) {
            // Clear existing offspring
            offspringObjects.forEach((obj) => scene.remove(obj.mesh));
            offspringObjects = [];

            const total = offspringData.length;
            const angleStep = (2 * Math.PI) / total;

            for (let i = 0; i < total; i++) {
                const data = offspringData[i];
                const genotype = data.genotype;

                // WARNA BERDASARKAN FENOTIPE
                const color =
                    data.phenotype === 'dominant'
                        ? new THREE.Color(0xff4444) // Merah
                        : new THREE.Color(0xffdd00); // Kuning

                // HITUNG JUMLAH ALEL DOMINAN (HURUF KAPITAL)
                let dominantCount = 0;
                genotype.forEach((locus) => {
                    for (let char of locus) {
                        if (char !== char.toLowerCase() && isNaN(char)) {
                            dominantCount++;
                        }
                    }
                });

                // UKURAN BOLA: 0.6 (min) → 1.2 (max)
                const maxDominant = genotype.length * 2 || 1;
                const radius = 0.6 + (dominantCount / maxDominant) * 0.6;

                const geometry = new THREE.SphereGeometry(radius, 32, 32);
                const material = new THREE.MeshPhongMaterial({
                    color: color,
                    shininess: 90,
                    transparent: true,
                    opacity: 0.92,
                });

                const mesh = new THREE.Mesh(geometry, material);
                const angle = i * angleStep;
                const distance = 8;
                mesh.position.x = Math.cos(angle) * distance;
                mesh.position.z = Math.sin(angle) * distance;
                mesh.position.y = (Math.random() - 0.5) * 1.5;

                scene.add(mesh);
                offspringObjects.push({ mesh, data });

                // Animasi muncul
                mesh.scale.set(0, 0, 0);
                animateScale(mesh, 1, 400 + i * 30);
            }
        }

        function animateScale(mesh, targetScale, duration) {
            const startScale = mesh.scale.x;
            const startTime = Date.now();

            function animate() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const easeProgress = 1 - Math.pow(1 - progress, 3);
                const currentScale = startScale + (targetScale - startScale) * easeProgress;
                mesh.scale.set(currentScale, currentScale, currentScale);
                if (progress < 1) requestAnimationFrame(animate);
            }
            animate();
        }

        // ======================
        // UI FUNCTIONS
        // ======================

        function setupEventListeners() {
            document.getElementById('mate-btn').addEventListener('click', () => {
                const p1L1 = document.getElementById('parent1-locus1').value.trim();
                const p1L2 = document.getElementById('parent1-locus2').value.trim();
                const p2L1 = document.getElementById('parent2-locus1').value.trim();
                const p2L2 = document.getElementById('parent2-locus2').value.trim();

                if (!p1L1 || !p2L1) {
                    alert('Please enter genotypes for both parents at locus 1');
                    return;
                }

                let parent1Locus1, parent1Locus2, parent2Locus1, parent2Locus2;
                
                try {
                    parent1Locus1 = p1L1.split('');
                    parent2Locus1 = p2L1.split('');
                } catch (e) {
                    alert('Invalid genotype format for locus 1. Please use format like "Aa"');
                    return;
                }

                parent1Locus2 = p1L2 ? p1L2.split('') : [];
                parent2Locus2 = p2L2 ? p2L2.split('') : [];

                if (parent1Locus2.length === 0) parent1Locus2 = null;
                if (parent2Locus2.length === 0) parent2Locus2 = null;

                const parent1 = parent1Locus2 ? [parent1Locus1, parent1Locus2] : [parent1Locus1];
                const parent2 = parent2Locus2 ? [parent2Locus1, parent2Locus2] : [parent2Locus1];

                const punnettData = buildPunnett(parent1, parent2);
                displayPunnettSquare(punnettData);
                displayTheoreticalRatio(punnettData.theoreticalRatio);
                simulateOffspring(50);
            });

            // Offspring click detection
            renderer.domElement.addEventListener('click', onOffspringClick);

            // Auto-run default cross
            setTimeout(() => {
                document.getElementById('mate-btn').click();
            }, 600);
        }

        function simulateOffspring(count) {
            const [parent1, parent2] = [[["A","a"],["B","b"]], [["a","a"],["b","b"]]];
            const offspringData = [];

            for (let i = 0; i < count; i++) {
                const gamete1 = randomGamet(parent1);
                const gamete2 = randomGamet(parent2);
                const offspringGenotype = [];
                for (let j = 0; j < gamete1.length; j++) {
                    const alleles = [gamete1[j], gamete2[j]].sort();
                    offspringGenotype.push(alleles.join(''));
                }
                const phenotype = genotypeToPhenotype(offspringGenotype);
                offspringData.push({ genotype: offspringGenotype, phenotype });
            }

            spawnOffspring(offspringData);
            calculateSimulatedRatio(offspringData);
        }

        function calculateSimulatedRatio(offspringData) {
            const phenotypeCounts = {};
            offspringData.forEach((offspring) => {
                const phenotype = offspring.phenotype;
                phenotypeCounts[phenotype] = (phenotypeCounts[phenotype] || 0) + 1;
            });

            const total = offspringData.length;
            const simulatedRatio = {};
            for (const phenotype in phenotypeCounts) {
                simulatedRatio[phenotype] = (phenotypeCounts[phenotype] / total).toFixed(2);
            }
            displaySimulatedRatio(simulatedRatio);
        }

        function displayPunnettSquare(punnettData) {
            const container = document.getElementById('punnett-container');
            const table = document.createElement('table');
            table.style.width = '100%';
            table.style.borderCollapse = 'collapse';
            table.style.textAlign = 'center';

            const headerRow = document.createElement('tr');
            const topLeftCell = document.createElement('th');
            topLeftCell.style.backgroundColor = 'rgba(0, 0, 0, 0.2)';
            headerRow.appendChild(topLeftCell);

            punnettData.parent2Gametes.forEach((gamete) => {
                const th = document.createElement('th');
                th.textContent = gamete.join('');
                th.style.padding = '10px';
                th.style.border = '1px solid rgba(255, 255, 255, 0.15)';
                th.style.backgroundColor = 'rgba(255, 200, 0, 0.1)';
                headerRow.appendChild(th);
            });
            table.appendChild(headerRow);

            punnettData.parent1Gametes.forEach((gamete1, i) => {
                const row = document.createElement('tr');
                const firstCell = document.createElement('th');
                firstCell.textContent = gamete1.join('');
                firstCell.style.padding = '10px';
                firstCell.style.border = '1px solid rgba(255, 255, 255, 0.15)';
                firstCell.style.backgroundColor = 'rgba(255, 100, 100, 0.1)';
                row.appendChild(firstCell);

                punnettData.grid[i].forEach((genotype) => {
                    const td = document.createElement('td');
                    td.textContent = genotype.join('');
                    td.style.padding = '10px';
                    td.style.border = '1px solid rgba(255, 255, 255, 0.15)';
                    td.style.backgroundColor =
                        genotypeToPhenotype(genotype) === 'dominant'
                            ? 'rgba(255, 100, 100, 0.2)'
                            : 'rgba(255, 220, 0, 0.2)';
                    row.appendChild(td);
                });
                table.appendChild(row);
            });

            container.innerHTML = '';
            container.appendChild(table);
        }

        function displayTheoreticalRatio(ratio) {
            const container = document.getElementById('theoretical-ratio');
            if (Object.keys(ratio).length === 0) {
                container.textContent = 'No data';
                return;
            }
            let ratioText = '';
            for (const phenotype in ratio) {
                const label = phenotype.charAt(0).toUpperCase() + phenotype.slice(1);
                ratioText += `${label}: ${ratio[phenotype]}<br>`;
            }
            container.innerHTML = ratioText;
        }

        function displaySimulatedRatio(ratio) {
            const container = document.getElementById('simulated-ratio');
            if (Object.keys(ratio).length === 0) {
                container.textContent = 'No data';
                return;
            }
            let ratioText = '';
            for (const phenotype in ratio) {
                const label = phenotype.charAt(0).toUpperCase() + phenotype.slice(1);
                ratioText += `${label}: ${ratio[phenotype]}<br>`;
            }
            container.innerHTML = ratioText;
        }

        function onOffspringClick(event) {
            const rect = renderer.domElement.getBoundingClientRect();
            mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
            mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;

            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(offspringObjects.map((obj) => obj.mesh));

            if (intersects.length > 0) {
                const clickedMesh = intersects[0].object;
                const clickedOffspring = offspringObjects.find((obj) => obj.mesh === clickedMesh);
                if (clickedOffspring) {
                    const data = clickedOffspring.data;
                    const genotypeStr = data.genotype.join(', ');
                    const phenotypeStr = data.phenotype.charAt(0).toUpperCase() + data.phenotype.slice(1);
                    alert(`Genotype: ${genotypeStr}\nPhenotype: ${phenotypeStr}`);
                }
            }
        }

        // ======================
        // QUIZ FUNCTIONS
        // ======================
        function setupQuiz() {
            // Option selection
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    // Remove selected class from all options in this question
                    const questionContainer = this.closest('.question-container');
                    questionContainer.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Add selected class to clicked option
                    this.classList.add('selected');
                    
                    // Hide feedback if already shown
                    const feedback = questionContainer.querySelector('.feedback');
                    feedback.style.display = 'none';
                    feedback.textContent = '';
                    feedback.classList.remove('correct', 'incorrect');
                    
                    // Hide correct answer display
                    const correctAnswer = questionContainer.querySelector('.correct-answer');
                    correctAnswer.style.display = 'none';
                });
            });
            
            // Check answers
            document.getElementById('check-answers').addEventListener('click', function() {
                let score = 0;
                const questions = document.querySelectorAll('.question-container');
                
                questions.forEach(question => {
                    const selectedOption = question.querySelector('.option.selected');
                    const feedback = question.querySelector('.feedback');
                    const correctAnswer = question.querySelector('.correct-answer');
                    
                    if (selectedOption) {
                        const isCorrect = selectedOption.getAttribute('data-correct') === 'true';
                        
                        // Clear previous classes
                        selectedOption.classList.remove('correct', 'incorrect');
                        
                        if (isCorrect) {
                            selectedOption.classList.add('correct');
                            feedback.textContent = '✓ Jawaban benar!';
                            feedback.classList.add('correct');
                            score++;
                        } else {
                            selectedOption.classList.add('incorrect');
                            feedback.textContent = '✗ Jawaban salah.';
                            feedback.classList.add('incorrect');
                            
                            // Show correct answer
                            correctAnswer.style.display = 'block';
                        }
                        
                        feedback.style.display = 'block';
                    } else {
                        feedback.textContent = '⚠️ Silakan pilih jawaban terlebih dahulu';
                        feedback.classList.add('incorrect');
                        feedback.style.display = 'block';
                        
                        // Show correct answer
                        correctAnswer.style.display = 'block';
                    }
                });
                
                // Show result
                const resultContainer = document.getElementById('result-container');
                const scoreElement = document.getElementById('score');
                const messageElement = document.getElementById('result-message');
                
                scoreElement.textContent = `Skor Anda: ${score} dari 10`;
                
                if (score === 10) {
                    messageElement.textContent = 'Luar biasa! Kamu menguasai materi dengan sempurna!';
                    messageElement.style.color = '#66ff66';
                } else if (score >= 8) {
                    messageElement.textContent = 'Sangat bagus! Pemahamanmu tentang genetika sangat baik.';
                    messageElement.style.color = '#66ff66';
                } else if (score >= 6) {
                    messageElement.textContent = 'Bagus! Kamu sudah memahami sebagian besar konsep.';
                    messageElement.style.color = '#ffdd00';
                } else if (score >= 4) {
                    messageElement.textContent = 'Cukup baik. Pelajari kembali materi yang masih kurang.';
                    messageElement.style.color = '#ffdd00';
                } else {
                    messageElement.textContent = 'Belum optimal. Pelajari kembali materi Hukum Mendel.';
                    messageElement.style.color = '#ff6666';
                }
                
                resultContainer.style.display = 'block';
                resultContainer.scrollIntoView({ behavior: 'smooth' });
            });
            
            // Reset answers
            document.getElementById('reset-answers').addEventListener('click', function() {
                resetQuiz();
            });
            
            // Restart quiz
            document.getElementById('restart-quiz').addEventListener('click', function() {
                resetQuiz();
                document.getElementById('result-container').style.display = 'none';
            });
        }

        function resetQuiz() {
            document.querySelectorAll('.option').forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            
            document.querySelectorAll('.feedback').forEach(feedback => {
                feedback.style.display = 'none';
                feedback.textContent = '';
                feedback.classList.remove('correct', 'incorrect');
            });
            
            document.querySelectorAll('.correct-answer').forEach(answer => {
                answer.style.display = 'none';
            });
            
            document.getElementById('result-container').style.display = 'none';
        }

        // ======================
        // ANIMATION LOOP
        // ======================
        function render() {
            requestAnimationFrame(render);
            const time = Date.now() * 0.001;
            offspringObjects.forEach((obj) => {
                obj.mesh.rotation.y += 0.005;
                obj.mesh.position.y = Math.sin(time * 1.8 + obj.mesh.position.x * 0.5) * 0.4;
            });
            renderer.render(scene, camera);
        }

        // Initialize the application
        window.onload = init;
    </script>
</body>
</html>